# 测试失败修复任务清单

## 核心修复任务

### 1. [ ] 修复PathsConfigNode创建问题
   - [ ] 1.1 在ConfigManagerCore._regenerate_paths中确保使用PathsConfigNode
   - [ ] 1.2 在ConfigNode.__getattr__中特殊处理paths属性
   - [ ] 1.3 添加类型检查和自动转换机制
   - [ ] 1.4 更新相关导入语句

### 2. [ ] 修复Windows路径分隔符问题
   - [ ] 2.1 在PathResolver.generate_tsb_logs_path中添加normpath
   - [ ] 2.2 修复混合分隔符的路径
   - [ ] 2.3 确保跨平台一致性
   - [ ] 2.4 更新相关测试断言

### 3. [ ] 修复多进程pickle错误
   - [ ] 3.1 将test_tsb_path_integration中的worker_process移到模块级
   - [ ] 3.2 使用functools.partial处理参数
   - [ ] 3.3 确保所有测试函数可序列化
   - [ ] 3.4 验证多进程测试通过

### 4. [ ] 修复相对路径问题
   - [ ] 4.1 确保PathResolver始终返回绝对路径
   - [ ] 4.2 修复测试中的路径验证逻辑
   - [ ] 4.3 添加路径绝对化处理
   - [ ] 4.4 更新相关文档

## 验证任务

### 5. [ ] 运行单元测试
   - [ ] 5.1 运行test_tsb_path_cross_platform.py
   - [ ] 5.2 运行test_tsb_path_integration.py
   - [ ] 5.3 运行test_yaml_comments_preservation.py
   - [ ] 5.4 确认所有测试通过

### 6. [ ] 运行集成测试
   - [ ] 6.1 执行完整测试套件
   - [ ] 6.2 验证无新增失败
   - [ ] 6.3 检查测试覆盖率
   - [ ] 6.4 生成测试报告

## 文档更新任务

### 7. [ ] 更新技术文档
   - [ ] 7.1 更新PathsConfigNode使用说明
   - [ ] 7.2 添加跨平台注意事项
   - [ ] 7.3 更新多进程使用指南
   - [ ] 7.4 添加故障排除章节

## 质量保证任务

### 8. [ ] 代码质量检查
   - [ ] 8.1 运行ruff检查
   - [ ] 8.2 修复代码风格问题
   - [ ] 8.3 添加必要的类型注释
   - [ ] 8.4 确保代码符合项目规范

## 依赖关系

- 任务1必须首先完成（核心问题）
- 任务2、3、4可以并行进行
- 任务5、6依赖于1-4完成
- 任务7、8可以在主要修复后进行

## 预估时间

- 核心修复（任务1-4）：2小时
- 验证测试（任务5-6）：1小时
- 文档和质量（任务7-8）：30分钟
- 总计：约3.5小时